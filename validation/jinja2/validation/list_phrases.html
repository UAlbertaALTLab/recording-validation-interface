{#
      Copyright (C) 2018 Eddie Antonio Santos <easantos@ualberta.ca>

      This program is free software: you can redistribute it and/or modify
      it under the terms of the GNU Affero General Public License as
      published by the Free Software Foundation, either version 3 of the
      License, or (at your option) any later version.

      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU Affero General Public License for more details.

      You should have received a copy of the GNU Affero General Public License
      along with this program.  If not, see <http://www.gnu.org/licenses/>.
#}

{#
 # Displays a list of phrases.
 #}

{% extends 'validation/_base.html' %}
{% import 'validation/_macros.html' as macros %}

{% block content %}
<div>
  <form class="form-inline ml-2 my-2 my-lg-0" method="GET" action="{{
    url('validation:index')
  }}">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" name="mode" value="all">All</button>
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" name="mode" value="validated">Validated</button>
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" name="mode" value="unvalidated">Unvalidated</button>
  </form>
</div>
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col"> Transcription </th>
        <th scope="col"> Translation </th>
        <th scope="col"> Recordings </th>
        <th scope="col"> Speaker </th>
      </tr>
    </thead>
    {% for phrase in phrases %}
    <tr data-update-uri="{{ url('validation:update_text', phrase_id=phrase.id) }}">
      {{ macros.td_transcription_link(user, phrase) }}
      {{ macros.td_translation(user, phrase) }}
      <td>
        <ul class="recordings">
        {% for recording in phrase.recordings %}
          <li>
            {{ macros.player(recording) }}
          </li>

        {% endfor %}{# for recording in phrase.recordings #}
        </ul>
      </td>
      <td>
        <ul class="speaker">
        {% for recording in phrase.recordings %}
          <li class="speaker_code">
            {{ macros.speaker(recording) }}
          </li>

        {% endfor %}{# for recording in phrase.recordings #}
        </ul>
      </td>
    </tr>
    {% endfor %}{# for phrase in phrases #}
  </table>
</div>

<nav>
  {{ macros.pagination(phrases, 'list_phrases') }}
</nav>
{% endblock content %}

{# vim: set ft=htmldjango :#}
