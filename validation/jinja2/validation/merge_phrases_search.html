{#
      Copyright (C) 2024 Felipe Ba√±ados Schwerter <banadoss@ualberta.ca>

      This program is free software: you can redistribute it and/or modify
      it under the terms of the GNU Affero General Public License as
      published by the Free Software Foundation, either version 3 of the
      License, or (at your option) any later version.

      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU Affero General Public License for more details.

      You should have received a copy of the GNU Affero General Public License
      along with this program.  If not, see <http://www.gnu.org/licenses/>.
#}

{% extends 'validation/_base.html' %}
{% import 'validation/_macros.html' as macros %}

{% block content %}
    <div>
        <form class="form-group row" method="GET" action="{{
            url('validation:merge-search', language.code)
          }}">
          <div class="col col-lg-10">
            <input class="form-control" type="search" placeholder="Search for candidate entries to merge..." aria-label="Search for entries that should be merged..." name="merge-search">
        </div>
        <div class="col col-lg-2">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Find candidates</button>
        </div>
            </form>
    </div>
        {% if candidates %}
        <form method="GET" action="{{url('validation:merge-delete', language.code)}}">
                <button class="btn btn-outline-danger my-2 my-sm-0 float-right" type="submit">Merge selected...</button>
                <div class="row">
                    <table class="table table-striped">
            <thead>
                <th scope="col">Select</th>
                <th scope="col">ID</th>
                <th scope="col">Transcription</th>
                <th scope="col">Translation</th>
                <th scope="col">Lang</th>
                <th scope="col"># Recordings</th>
                <th scope="col">Analysis</th>
                <th scope="col">Comment</th>
            </thead>
            <tbody>
            {% for candidate in candidates %}
            <tr>
                <td class="d-flex justify-content-center"><div class="form-check"><input class="form-check-input" type="checkbox" name="merge-selected" value="{{candidate.id}}" /></div></td>
                <td>{{candidate.id}}</td>
                <td>{{candidate.transcription}}</td>
                <td>{{candidate.translation}}</td>
                <td>{{candidate.language.code}}</td>
                <td>{{candidate.recording_set.count()}}</td>
                <td>{{ candidate.analysis }}</td>
                <td>{{ candidate.comment }} </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </form>
        {% endif %}
    </div>
</div>
{% endblock content %}
