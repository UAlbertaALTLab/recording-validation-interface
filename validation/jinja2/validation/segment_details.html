<script>
    function showDiv(name, suggestions=null) {
        document.getElementById('edit').style.display = "block";
        analysis = '';

        if (suggestions == null) {
            translation = document.getElementById(name + '-translation').innerHTML;
        }

        else {
            translation = suggestions[name]['translation'];
            analysis = suggestions[name]['analysis'];
        }

        document.getElementById('cree').value = name;
        document.getElementById('transl').value = translation;
        document.getElementById('analysis').value = analysis;
    }
</script>

{% extends 'validation/_base.html' %}
{% import 'validation/_macros.html' as macros %}

{% block content %}
<div class="table-responsive">
    <button class="favorite styled"
        onclick="showDiv('{{ segment_name }}')"
        style="float: right">
            Edit
    </button>

    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col"> Transcription </th>
          <th scope="col"> Translation </th>
          <th scope="col"> Recordings </th>
          <th scope="col">Speaker </th>
        </tr>
      </thead>
      {% for phrase in phrases %}
      <tr>
        {{ macros.td_transcription(user, phrase) }}
        {{ macros.td_translation(user, phrase) }}
        <td>
          <ul class="recordings">
          {% for recording in phrase.recordings %}
            <li>
              {{ macros.player(recording) }}
            </li>
  
          {% endfor %}{# for recording in phrase.recordings #}
          </ul>
        </td>
        <td>
          <ul class="speaker">
          {% for recording in phrase.recordings %}
            <li class="speaker_code">
              {{ macros.speaker(recording) }}
            </li>
  
          {% endfor %}{# for recording in phrase.recordings #}
          </ul>
        </td>
      </tr>
      {% endfor %}{# for phrase in phrases #}
    </table>

    <div style="display: none;" id="edit">
        {% include 'validation/segment_edit.html' %}
    </div>

    <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col"> Suggestion </th>
            <th scope="col"> Translation </th>
            <th scope="col"> Analysis </th>
            <th scope="col"> MED </th>
            <th scope="col"> Options </th>
          </tr>
        </thead>
        {% for suggestion in suggestions %}
        <tr>
            {{ macros.td_suggestion_transcription(user, suggestion) }}
            {{ macros.td_suggestion_translation(user, suggestion, suggestions) }}
            {{ macros.td_suggestion_analysis(user, suggestion, suggestions) }}
            {{ macros.td_suggestion_med(user, suggestion, suggestions) }}
            <td>
                <input type="button" value="Accept" onclick="showDiv('{{ suggestion }}', {{ suggestions }})" />
            </td>
        </tr>
        {% endfor %}{# for suggestion in suggestions #}
      </table>
</div>
{% endblock content %}
